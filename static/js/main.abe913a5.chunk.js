(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(31)},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(14),i=a.n(r);a(22),a(23);const l=s.a.createContext(),o=l.Provider,d=l.Consumer;var m=a(5),c=a(6);a(24);var h=({isLogin:e})=>{let t=e?"spinner spinner__login":"spinner";return s.a.createElement("div",{className:t},s.a.createElement("div",{className:"lds-hourglass"}))};a(25);var u=()=>s.a.createElement("div",{className:"error-indicator"},s.a.createElement("span",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"),s.a.createElement("span",null,"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"));var g=e=>{const t=e.data,a=e.onItemDeleted,n=e.onFilterTextChanged,r=e.onFilterTextCleared,i=e.onItemAdded,l=e.isLoading,o=e.FilterText;if(e.isError)return s.a.createElement(u,null);const d=l?s.a.createElement(h,null):t.map(e=>{const t=e.id,n=e.data;return s.a.createElement("div",{key:t,className:"item"},s.a.createElement("p",null,n),s.a.createElement("button",{onClick:()=>a(t)},s.a.createElement("i",{className:"fas fa-trash-alt"})))});return s.a.createElement("div",null,s.a.createElement("section",{className:"wrapper"},s.a.createElement("div",{className:"cover"},s.a.createElement("div",{className:"content"},d),s.a.createElement("div",null,s.a.createElement("input",{type:"text",className:"input",value:o,onChange:n})),s.a.createElement("button",{className:"button button__reset",onClick:r},"\u0421\u0431\u0440\u043e\u0441"),s.a.createElement("button",{className:"button button__add",onClick:i},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))};var p=(e,t)=>a=>s.a.createElement(d,null,n=>{const r=t(n);return s.a.createElement(e,Object.assign({},a,r))});var E=e=>{return class extends s.a.Component{constructor(...e){super(...e),this.state={data:null,loading:!1,error:!1,filterText:""},this.changeFilterText=(e=>{this.setState(()=>({filterText:e}))}),this.onFilterTextChanged=(e=>{this.changeFilterText(e.target.value)}),this.onFilterTextCleared=(async()=>{await this.changeFilterText("")}),this.getFilteredData=(()=>{let e=this.state.data;return null===e?this.state.data:e.filter(e=>!!(e.data.indexOf(this.state.filterText)+1))}),this.onItemDeleted=(async e=>{await this.props.deleteItem(e),this.componentDidMount()}),this.onItemAdded=(async()=>{await this.props.addItem(this.state.filterText),this.onFilterTextCleared(),this.componentDidMount()})}componentDidMount(){this.setState({loading:!0,error:!1}),this.props.getData().then(e=>{this.setState({data:e,loading:!1})}).catch(()=>{this.setState({loading:!1,error:!0})})}render(){const t=this.state,a=t.data,n=t.loading,r=t.error;return s.a.createElement(e,Object.assign({},this.props,{data:this.getFilteredData(),isLoading:!a||n,isError:r,onItemDeleted:this.onItemDeleted,onFilterTextChanged:this.onFilterTextChanged,onFilterTextCleared:this.onFilterTextCleared,FilterText:this.state.filterText,onItemAdded:this.onItemAdded}))}}};const w=p(E(g),e=>({getData:e.getBlackList,deleteItem:e.deleteBlackListItem,addItem:e.addBlackListItem})),L=p(E(g),e=>({getData:e.getEmailsList,deleteItem:e.deleteEmailsListItem,addItem:e.addEmailsListItem}));var v=()=>s.a.createElement("div",{className:"wrapper panel"},s.a.createElement("div",{className:"panel__item"},s.a.createElement(m.b,{to:"/lists/blacklist/"},s.a.createElement("i",{className:"fa fa-ban","aria-hidden":"true"}),s.a.createElement("p",null,"\u0427\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"))),s.a.createElement("div",{className:"panel__item"},s.a.createElement(m.b,{to:"/lists/emails/"},s.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}),s.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043e\u043a e-mail"))));var x=({isLoggedIn:e})=>e?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null,s.a.createElement(v,null),s.a.createElement(c.d,null,s.a.createElement(c.b,{exact:!0,path:"/lists",render:()=>s.a.createElement(c.a,{to:"/lists/blacklist"})}),s.a.createElement(c.b,{path:"/lists/blacklist",render:()=>s.a.createElement(w,null)}),s.a.createElement(c.b,{path:"/lists/emails",render:()=>s.a.createElement(L,null)})))):s.a.createElement(c.a,{to:"/login"});var b=p(class extends s.a.Component{constructor(...e){super(...e),this.state={login:"",password:"",loading:!1,error:!1},this.loginTextChanged=(e=>{this.setState(()=>({login:e}))}),this.onLoginTextChanged=(e=>{this.loginTextChanged(e.target.value)}),this.passwordTextChanged=(e=>{this.setState(()=>({password:e}))}),this.onPasswordTextChanged=(e=>{this.passwordTextChanged(e.target.value)}),this.onLogin=(()=>{this.setState({loading:!0,error:!1}),this.props.auth({username:this.state.login,password:this.state.password}).then(e=>{e.ok?(this.props.logIn(),this.setState({loading:!1,error:!1})):this.setState({loading:!1,error:!0})}).catch(()=>{this.setState({loading:!1,error:!0})})})}render(){let e=this.state.loading?s.a.createElement(h,{isLogin:!0}):s.a.createElement("button",{className:"button login__enter",onClick:this.onLogin},"\u0412\u043e\u0439\u0442\u0438");if(this.props.isLoggedIn)return s.a.createElement(c.a,{to:"/lists"});let t=this.state.error?"\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u043f\u0430\u0440\u0430 \u043b\u043e\u0433\u0438\u043d\u043f\u0430\u0440\u043e\u043b\u044c!":null;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"wrapper login_grid"},s.a.createElement("div",{className:"login_border"},s.a.createElement("div",null,s.a.createElement("p",{className:"input_text"},"Login:"),s.a.createElement("input",{className:"email_input",type:"text",placeholder:"Login",onChange:this.onLoginTextChanged}),s.a.createElement("p",{className:"input_text no_margin"},"Password:"),s.a.createElement("input",{className:"email_input",type:"Password",placeholder:"Password",onChange:this.onPasswordTextChanged}),s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login__error"},t),e)))))}},e=>({auth:e.auth}));class I{constructor(){this.auth=(({username:e,password:t})=>new Promise((a,n)=>{setTimeout(()=>{e===t?a({ok:!0}):n(!1)},1e3)})),this.refreshToken=(()=>!1),this.counter=10,this.dataBlackList=[{id:1,number:"9250031065"},{id:2,number:"9151600101"},{id:3,number:"9253031570"}],this.dataEmailsList=[{id:1,email:"asd@asd.ru"},{id:2,email:"qwe@qwe.ru"}],this.getBlackList=(()=>new Promise((e,t)=>{setTimeout(()=>{Math.random()<.99?e(this.dataBlackList.map(e=>({id:e.id,data:e.number}))):t(new Error("Something bad happened"))},1e3)})),this.deleteBlackListItem=(e=>new Promise((t,a)=>{setTimeout(()=>{Math.random()<.99?(this.dataBlackList=[...this.dataBlackList.filter(t=>{if(e!==t.id)return!0})],t(!0)):a(new Error("Something bad happened"))},1e3)})),this.addBlackListItem=(e=>new Promise((t,a)=>{setTimeout(()=>{Math.random()<.99?(e&&(this.counter++,this.dataBlackList.push({id:this.counter,number:e})),t(!0)):a(new Error("Something bad happened"))},1e3)})),this.getEmailsList=(()=>new Promise((e,t)=>{setTimeout(()=>{Math.random()<.99?e(this.dataEmailsList.map(e=>({id:e.id,data:e.email}))):t(new Error("Something bad happened"))},1e3)})),this.deleteEmailsListItem=(e=>new Promise((t,a)=>{setTimeout(()=>{Math.random()<.99?(this.dataEmailsList=[...this.dataEmailsList.filter(t=>{if(e!==t.id)return!0})],t(!0)):a(new Error("Something bad happened"))},1e3)})),this.addEmailsListItem=(e=>new Promise((t,a)=>{setTimeout(()=>{Math.random()<.99?(e&&(this.counter++,this.dataEmailsList.push({id:this.counter,email:e})),t(!0)):a(new Error("Something bad happened"))},1e3)}))}}var T=({isLoggedIn:e,logOut:t})=>{let a=e?s.a.createElement("a",{className:"exit",onClick:()=>t()}," \u0412\u044b\u0439\u0442\u0438"):null;return s.a.createElement("header",null,s.a.createElement("div",{className:"wrapper"},s.a.createElement("div",{className:"name"},"Web-Form"),a))};i.a.render(s.a.createElement(class extends s.a.Component{constructor(...e){super(...e),this.restService=new I,this.state={isLoggedIn:!1},this.refreshToken=(async()=>{await this.restService.refreshToken()&&this.logIn()}),this.logIn=(()=>{this.setState({isLoggedIn:!0})}),this.logOut=(()=>{localStorage.jt="",this.setState({isLoggedIn:!1})})}componentDidMount(){this.refreshToken()}render(){let e=this.state.isLoggedIn;return console.log(e),s.a.createElement(o,{value:this.restService},s.a.createElement(m.a,null,s.a.createElement(T,{isLoggedIn:e,logOut:this.logOut}),s.a.createElement(c.d,null,s.a.createElement(c.b,{path:"/login",render:()=>s.a.createElement(b,{isLoggedIn:e,logIn:this.logIn})}),s.a.createElement(c.b,{render:()=>s.a.createElement(x,{isLoggedIn:e})}),s.a.createElement(c.b,{render:()=>s.a.createElement("h2",null,"Page not found!")}))))}},null),document.getElementById("root"))}},[[17,1,2]]]);